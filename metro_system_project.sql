
-- Create database
CREATE DATABASE IF NOT EXISTS metro_system;
USE metro_system;

-- Create table: RESERVATION
CREATE TABLE RESERVATION (
    R_ID INTEGER NOT NULL,
    TYPE_OF_RESER VARCHAR(50) NOT NULL,
    PRIMARY KEY(R_ID)
);

-- Insert data into RESERVATION
INSERT INTO RESERVATION VALUES(1,'Maternity');
INSERT INTO RESERVATION VALUES(2,'Maternity');
INSERT INTO RESERVATION VALUES(3,'Handicapped');
INSERT INTO RESERVATION VALUES(4,'Handicapped');
INSERT INTO RESERVATION VALUES(5,'Handicapped');

-- Create table: PAYMENT
CREATE TABLE PAYMENT (
    PAYMENT_ID INTEGER NOT NULL,
    START_STATION VARCHAR(50),
    END_STATION VARCHAR(50),
    TOTAL_AMOUNT INTEGER,
    TYPE_OF_PAYMENT VARCHAR(50),
    PRIMARY KEY(PAYMENT_ID)
);

-- Insert data into PAYMENT
INSERT INTO PAYMENT VALUES(12345,'Secunderabad','BharatNagar',70,'Cash');
INSERT INTO PAYMENT VALUES(13456,'Erragadda','Begumpet',80,'Cash');
INSERT INTO PAYMENT VALUES(14567,'Paradise','Begumpet',90,'Online');
INSERT INTO PAYMENT VALUES(15678,'Secunderabad','Madhapur',100,'Cash');
INSERT INTO PAYMENT VALUES(16789,'BharatNagar','Kukatpally',110,'Online');

-- Create table: FARE
CREATE TABLE FARE (
    DISTANCE INTEGER NOT NULL,
    START_STATION VARCHAR(50) NOT NULL,
    END_STATION VARCHAR(50) NOT NULL,
    PRIMARY KEY(START_STATION, END_STATION)
);

-- Insert data into FARE
INSERT INTO FARE VALUES(30,'Secunderabad','BharatNagar');
INSERT INTO FARE VALUES(45,'Erragadda','Begumpet');
INSERT INTO FARE VALUES(50,'Paradise','Begumpet');
INSERT INTO FARE VALUES(55,'Secunderabad','Madhapur');
INSERT INTO FARE VALUES(65,'BharatNagar','Kukatpally');

-- Create table: METRO
CREATE TABLE METRO (
    METRO_ID INTEGER NOT NULL,
    METRO_NAME VARCHAR(50),
    SEAT_NO INTEGER,
    PRIMARY KEY(METRO_ID)
);

-- Insert sample data into METRO
INSERT INTO METRO VALUES(1122, 'Metro A', 100);
INSERT INTO METRO VALUES(1133, 'Metro B', 100);
INSERT INTO METRO VALUES(1144, 'Metro C', 100);
INSERT INTO METRO VALUES(1155, 'Metro D', 100);
INSERT INTO METRO VALUES(1166, 'Metro E', 100);

-- Create table: ROUTES
CREATE TABLE ROUTES (
    ARR_TIME TIMESTAMP(0) NOT NULL,
    DEPART_TIME TIMESTAMP(0) NOT NULL,
    ROUTE_ID INTEGER NOT NULL,
    METRO_ID INTEGER NOT NULL,
    PRIMARY KEY(ROUTE_ID),
    FOREIGN KEY(METRO_ID) REFERENCES METRO(METRO_ID)
);

-- Insert data into ROUTES
INSERT INTO ROUTES VALUES('2020-01-01 11:08:54','2020-01-01 11:10:54',1,1122);
INSERT INTO ROUTES VALUES('2020-01-01 06:02:34','2020-01-01 06:08:36',2,1133);
INSERT INTO ROUTES VALUES('2020-01-01 10:15:20','2020-01-01 10:22:54',3,1144);
INSERT INTO ROUTES VALUES('2020-01-01 04:10:54','2020-01-01 04:11:54',4,1155);
INSERT INTO ROUTES VALUES('2020-01-01 07:05:54','2020-01-01 07:10:54',5,1166);

-- Create table: STATION
CREATE TABLE STATION (
    STATION_ID INTEGER NOT NULL,
    ROUTE_ID INTEGER NOT NULL,
    STATION_NAME VARCHAR(50) NOT NULL,
    PRIMARY KEY(STATION_ID),
    FOREIGN KEY(ROUTE_ID) REFERENCES ROUTES(ROUTE_ID)
);

-- Insert data into STATION
INSERT INTO STATION VALUES(11001,1,'S1');
INSERT INTO STATION VALUES(11002,2,'S2');
INSERT INTO STATION VALUES(11003,3,'S3');
INSERT INTO STATION VALUES(11004,4,'S4');
INSERT INTO STATION VALUES(11005,5,'S5');

-- Create table: COMPLAINT
CREATE TABLE COMPLAINT (
    COMPLAINT_NO INTEGER NOT NULL,
    COMPLAINT_TYPE VARCHAR(50) NOT NULL,
    STATION_ID INTEGER NOT NULL,
    NAME VARCHAR(50) NOT NULL,
    PHONE_NO BIGINT NOT NULL,
    AADHAR_CARD BIGINT NOT NULL,
    PRIMARY KEY(COMPLAINT_NO),
    FOREIGN KEY(STATION_ID) REFERENCES STATION(STATION_ID)
);

-- Insert data into COMPLAINT
INSERT INTO COMPLAINT VALUES(123,'Robbery',11001,'Kirti',9668710234,11111);
INSERT INTO COMPLAINT VALUES(124,'Hygiene',11002,'Trisha',9772345634,22222);
INSERT INTO COMPLAINT VALUES(125,'Robbery',11001,'Rohan',9890123234,33333);
INSERT INTO COMPLAINT VALUES(126,'Hygiene',11002,'Paul',9980345671,44444);
INSERT INTO COMPLAINT VALUES(127,'LostItems',11003,'Chetan',773826534,55555);

-- Create table: PASSENGER
CREATE TABLE PASSENGER (
    NAME VARCHAR(50) NOT NULL,
    PHONE_NO BIGINT NOT NULL,
    START_STATION VARCHAR(50) NOT NULL,
    END_STATION VARCHAR(50) NOT NULL,
    PAYMENT_ID INTEGER NOT NULL,
    AADHAR_CARD BIGINT NOT NULL,
    R_ID INTEGER NOT NULL,
    PRIMARY KEY(AADHAR_CARD),
    FOREIGN KEY(PAYMENT_ID) REFERENCES PAYMENT(PAYMENT_ID),
    FOREIGN KEY(R_ID) REFERENCES RESERVATION(R_ID)
);

-- Insert data into PASSENGER
INSERT INTO PASSENGER VALUES('Kirti',9668710234,'Secunderabad','BharatNagar',12345,11111,1);
INSERT INTO PASSENGER VALUES('Trisha',9772345634,'Erragadda','Begumpet',13456,22222,2);
INSERT INTO PASSENGER VALUES('Rohan',9890123234,'Paradise','Begumpet',14567,33333,3);
INSERT INTO PASSENGER VALUES('Paul',9980345671,'Secunderabad','Madhapur',15678,44444,4);
INSERT INTO PASSENGER VALUES('Chetan',773826534,'BharatNagar','Kukatpally',16789,55555,5);

-- Create table: TECH_SUPERVISOR
CREATE TABLE TECH_SUPERVISOR (
    TECH_ID INTEGER,
    EMAIL VARCHAR(50),
    FIRST_NAME VARCHAR(50),
    LAST_NAME VARCHAR(50),
    COMPLAINT_NO INTEGER,
    PHONE_NO BIGINT,
    PRIMARY KEY(TECH_ID),
    FOREIGN KEY(COMPLAINT_NO) REFERENCES COMPLAINT(COMPLAINT_NO)
);

-- Insert data into TECH_SUPERVISOR
INSERT INTO TECH_SUPERVISOR VALUES(1,'k@gmail.com','Vinita','Jain',123,9668710234);
INSERT INTO TECH_SUPERVISOR VALUES(2,'t@gmail.com','Radha','Gupta',124,9772345634);
INSERT INTO TECH_SUPERVISOR VALUES(3,'r@gmail.com','Mohan','Reddy',125,9890123234);
INSERT INTO TECH_SUPERVISOR VALUES(4,'p@gmail.com','Krish','Singh',126,9980345671);
INSERT INTO TECH_SUPERVISOR VALUES(5,'c@gmail.com','Meenal','Singh',127,773826534);
